# -In [2]:
import numpy as np
Creating ndarrays
1. np.array(object, dtype=None, copy=True, order='K', subok=False, ndmin=0)
In [4]:
data1 = [1, 2, 3, 4, 5]
np.array(data1)
Out[4]:
array([1, 2, 3, 4, 5])
In [5]:
data2 = [[1, 2, 3, 4], [5, 6, 7, 8]]
np.array(data2)
Out[5]:
array([[1, 2, 3, 4],
       [5, 6, 7, 8]])
2. np.zeros(shape, dtype=float, order='C') 与之类似有np.ones()、np.empty()
In [11]:
np.zeros(5)
Out[11]:
array([0., 0., 0., 0., 0.])
In [13]:
np.ones((2, 3), dtype=int)
Out[13]:
array([[1, 1, 1],
       [1, 1, 1]])
In [14]:
np.empty((2, 3, 2))
Out[14]:
array([[[1.40824633e-311, 3.16202013e-322],
        [0.00000000e+000, 0.00000000e+000],
        [0.00000000e+000, 2.74136024e-057]],

       [[3.69983105e-057, 6.81924389e-038],
        [1.67473778e-076, 6.17154485e-062],
        [1.45265921e-051, 3.63977601e+175]]])
3. np.eye(N, M=None, k=0, dtype=<class 'float'>, order='C')
In [44]:
np.eye(3)
Out[44]:
array([[1., 0., 0.],
       [0., 1., 0.],
       [0., 0., 1.]])
In [45]:
np.eye(3, 4)
Out[45]:
array([[1., 0., 0., 0.],
       [0., 1., 0., 0.],
       [0., 0., 1., 0.]])
In [46]:
np.eye(3, 4, -1)
Out[46]:
array([[0., 0., 0., 0.],
       [1., 0., 0., 0.],
       [0., 1., 0., 0.]])
4. np.arange([start,] stop[, step,], dtype=None)
In [17]:
np.arange(10)
Out[17]:
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
In [18]:
np.arange(1, 10)
Out[18]:
array([1, 2, 3, 4, 5, 6, 7, 8, 9])
In [19]:
np.arange(1, 10, 2)
Out[19]:
array([1, 3, 5, 7, 9])
5. np.linspace(start, stop, num=50, endpoint=True, retstep=False, dtype=None, axis=0)
In [25]:
np.linspace(0, np.pi, 100)
Out[25]:
array([0.        , 0.03173326, 0.06346652, 0.09519978, 0.12693304,
       0.1586663 , 0.19039955, 0.22213281, 0.25386607, 0.28559933,
       0.31733259, 0.34906585, 0.38079911, 0.41253237, 0.44426563,
       0.47599889, 0.50773215, 0.53946541, 0.57119866, 0.60293192,
       0.63466518, 0.66639844, 0.6981317 , 0.72986496, 0.76159822,
       0.79333148, 0.82506474, 0.856798  , 0.88853126, 0.92026451,
       0.95199777, 0.98373103, 1.01546429, 1.04719755, 1.07893081,
       1.11066407, 1.14239733, 1.17413059, 1.20586385, 1.23759711,
       1.26933037, 1.30106362, 1.33279688, 1.36453014, 1.3962634 ,
       1.42799666, 1.45972992, 1.49146318, 1.52319644, 1.5549297 ,
       1.58666296, 1.61839622, 1.65012947, 1.68186273, 1.71359599,
       1.74532925, 1.77706251, 1.80879577, 1.84052903, 1.87226229,
       1.90399555, 1.93572881, 1.96746207, 1.99919533, 2.03092858,
       2.06266184, 2.0943951 , 2.12612836, 2.15786162, 2.18959488,
       2.22132814, 2.2530614 , 2.28479466, 2.31652792, 2.34826118,
       2.37999443, 2.41172769, 2.44346095, 2.47519421, 2.50692747,
       2.53866073, 2.57039399, 2.60212725, 2.63386051, 2.66559377,
       2.69732703, 2.72906028, 2.76079354, 2.7925268 , 2.82426006,
       2.85599332, 2.88772658, 2.91945984, 2.9511931 , 2.98292636,
       3.01465962, 3.04639288, 3.07812614, 3.10985939, 3.14159265])
Type cast -->a.astype()


1. int --> float
In [28]:
a = np.arange(5)
print(a, a.dtype, sep='\n')
b = a.astype(np.float)
print(b, b.dtype, sep='\n')
[0 1 2 3 4]
int32
[0. 1. 2. 3. 4.]
float64
2. float --> int, (decimal part will be truncated)
In [29]:
a = np.array([1.2, 2.5, 3.9, 6.4])
print(a, a.dtype, sep='\n')
b = a.astype(np.int)
print(b, b.dtype, sep='\n')
[1.2 2.5 3.9 6.4]
float64
[1 2 3 6]
int32
3. str --> num
In [39]:
a = np.array(['1.23', '4.5', '100', '-9.6'], dtype=np.string_)
print(a, a.dtype, sep='\n')
b = a.astype(np.float)
print(b, b.dtype, sep='\n')
[b'1.23' b'4.5' b'100' b'-9.6']
|S4
[  1.23   4.5  100.    -9.6 ]
float64
Arithmetic with NumPy Arrays
1. +, -, *, /, , %, 
In [49]:
a = np.arange(5)
a
Out[49]:
array([0, 1, 2, 3, 4])
In [50]:
a + 10
Out[50]:
array([10, 11, 12, 13, 14])
In [51]:
a - 4
Out[51]:
array([-4, -3, -2, -1,  0])
In [52]:
a * 2
Out[52]:
array([0, 2, 4, 6, 8])
In [53]:
a / 5
Out[53]:
array([0. , 0.2, 0.4, 0.6, 0.8])
In [54]:
a % 3
Out[54]:
array([0, 1, 2, 0, 1], dtype=int32)
In [55]:
a ** 2
Out[55]:
array([ 0,  1,  4,  9, 16], dtype=int32)
2. >, <, ==, >=, <=, !=
In [68]:
a , b = np.random.random((2, 3)), np.random.random((2, 3))
print('a:', a, sep='\n')
print('b:', b, sep='\n')
a:
[[0.75044481 0.43571073 0.17576022]
 [0.08508236 0.90212141 0.47073929]]
b:
[[0.1653514  0.30195994 0.46305522]
 [0.61877302 0.94406292 0.4185715 ]]
In [69]:
a > b
Out[69]:
array([[ True,  True, False],
       [False, False,  True]])
In [70]:
a == b
Out[70]:
array([[False, False, False],
       [False, False, False]])
In [71]:
a < b
Out[71]:
array([[False, False,  True],
       [ True,  True, False]])
In [72]:
a >= b
Out[72]:
array([[ True,  True, False],
       [False, False,  True]])
In [73]:
a != b
Out[73]:
array([[ True,  True,  True],
       [ True,  True,  True]])
Basic Indexing and Slicing
In [90]:
a = np.arange(10)
a
Out[90]:
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
In [91]:
b = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
b
Out[91]:
array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]])
1. accessing value
In [92]:
print(a[5])
print(a[5:8])
print(a[:3])
print(a[:-3])
5
[5 6 7]
[0 1 2]
[0 1 2 3 4 5 6]
In [98]:
print(b[0], b[:2], b[1][2], b[1,2], b[:2, 1:], sep='\n----------\n')
[1 2 3]
----------
[[1 2 3]
 [4 5 6]]
----------
6
----------
6
----------
[[2 3]
 [5 6]]
2. modifying value
In [99]:
a[5:8] = 12
a
Out[99]:
array([ 0,  1,  2,  3,  4, 12, 12, 12,  8,  9])
In [100]:
b[0] = 10
b
Out[100]:
array([[10, 10, 10],
       [ 4,  5,  6],
       [ 7,  8,  9]])
In [101]:
b[:, -1] = -1
b
Out[101]:
array([[10, 10, -1],
       [ 4,  5, -1],
       [ 7,  8, -1]])
3. boolean indexing
In [102]:
names = np.array(['Bob', 'Joe', 'Will', 'Bob', 'Will', 'Joe', 'Joe'])
names
Out[102]:
array(['Bob', 'Joe', 'Will', 'Bob', 'Will', 'Joe', 'Joe'], dtype='<U4')
In [103]:
names == 'Will'
Out[103]:
array([False, False,  True, False,  True, False, False])
In [105]:
names[names == 'Will']
Out[105]:
array(['Will', 'Will'], dtype='<U4')
In [107]:
data = np.random.random((7, 4))
data
Out[107]:
array([[0.59028618, 0.08474988, 0.24642917, 0.99727839],
       [0.75122645, 0.46784203, 0.3779746 , 0.42856805],
       [0.65852845, 0.57268485, 0.46720685, 0.87345267],
       [0.22115235, 0.87378715, 0.61703166, 0.15248516],
       [0.91096314, 0.45710725, 0.77829319, 0.92000196],
       [0.24557961, 0.7046679 , 0.4506215 , 0.40183276],
       [0.0980379 , 0.46017913, 0.05821307, 0.98181751]])
In [108]:
data[names == 'Bob']
Out[108]:
array([[0.59028618, 0.08474988, 0.24642917, 0.99727839],
       [0.22115235, 0.87378715, 0.61703166, 0.15248516]])
In [109]:
data[data < 0.5]
Out[109]:
array([0.08474988, 0.24642917, 0.46784203, 0.3779746 , 0.42856805,
       0.46720685, 0.22115235, 0.15248516, 0.45710725, 0.24557961,
       0.4506215 , 0.40183276, 0.0980379 , 0.46017913, 0.05821307])
In [111]:
data[data > 0.5] = 10
data
Out[111]:
array([[10.        ,  0.08474988,  0.24642917, 10.        ],
       [10.        ,  0.46784203,  0.3779746 ,  0.42856805],
       [10.        , 10.        ,  0.46720685, 10.        ],
       [ 0.22115235, 10.        , 10.        ,  0.15248516],
       [10.        ,  0.45710725, 10.        , 10.        ],
       [ 0.24557961, 10.        ,  0.4506215 ,  0.40183276],
       [ 0.0980379 ,  0.46017913,  0.05821307, 10.        ]])
4. fancy indexing
In [3]:
a = np.empty((8, 4))
for i in range(8):
    a[i] = i
a
Out[3]:
array([[0., 0., 0., 0.],
       [1., 1., 1., 1.],
       [2., 2., 2., 2.],
       [3., 3., 3., 3.],
       [4., 4., 4., 4.],
       [5., 5., 5., 5.],
       [6., 6., 6., 6.],
       [7., 7., 7., 7.]])
In [4]:
a[[4, 3, 0, 6]]
Out[4]:
array([[4., 4., 4., 4.],
       [3., 3., 3., 3.],
       [0., 0., 0., 0.],
       [6., 6., 6., 6.]])
In [7]:
b = np.arange(32).reshape((8, 4))
b
Out[7]:
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15],
       [16, 17, 18, 19],
       [20, 21, 22, 23],
       [24, 25, 26, 27],
       [28, 29, 30, 31]])
In [8]:
b[[1, 5, 7, 2], [0, 3, 1, 2]] # elements (1, 0), (5, 3), (7, 1), (2, 2) were selected
Out[8]:
array([ 4, 23, 29, 10])
In [11]:
b[:, [0, 3, 1, 2]]
Out[11]:
array([[ 0,  3,  1,  2],
       [ 4,  7,  5,  6],
       [ 8, 11,  9, 10],
       [12, 15, 13, 14],
       [16, 19, 17, 18],
       [20, 23, 21, 22],
       [24, 27, 25, 26],
       [28, 31, 29, 30]])
Transposing Arrays and Swapping Axes
1. a.T
In [3]:
a = np.arange(15).reshape((3, 5))
print(a)
a.T
[[ 0  1  2  3  4]
 [ 5  6  7  8  9]
 [10 11 12 13 14]]
Out[3]:
array([[ 0,  5, 10],
       [ 1,  6, 11],
       [ 2,  7, 12],
       [ 3,  8, 13],
       [ 4,  9, 14]])
In [4]:
a = np.arange(24).reshape((2, 3, 4))
print(a)
a.T
[[[ 0  1  2  3]
  [ 4  5  6  7]
  [ 8  9 10 11]]

 [[12 13 14 15]
  [16 17 18 19]
  [20 21 22 23]]]
Out[4]:
array([[[ 0, 12],
        [ 4, 16],
        [ 8, 20]],

       [[ 1, 13],
        [ 5, 17],
        [ 9, 21]],

       [[ 2, 14],
        [ 6, 18],
        [10, 22]],

       [[ 3, 15],
        [ 7, 19],
        [11, 23]]])
2. a.transpose(*axes)
In [5]:
a = np.arange(24).reshape((2, 3, 4))
print(a)
a.transpose()
[[[ 0  1  2  3]
  [ 4  5  6  7]
  [ 8  9 10 11]]

 [[12 13 14 15]
  [16 17 18 19]
  [20 21 22 23]]]
Out[5]:
array([[[ 0, 12],
        [ 4, 16],
        [ 8, 20]],

       [[ 1, 13],
        [ 5, 17],
        [ 9, 21]],

       [[ 2, 14],
        [ 6, 18],
        [10, 22]],

       [[ 3, 15],
        [ 7, 19],
        [11, 23]]])
In [6]:
a.transpose((2, 0, 1))
Out[6]:
array([[[ 0,  4,  8],
        [12, 16, 20]],

       [[ 1,  5,  9],
        [13, 17, 21]],

       [[ 2,  6, 10],
        [14, 18, 22]],

       [[ 3,  7, 11],
        [15, 19, 23]]])
3. np.swapaxes(a, axis1, axis2) / a.swapaxes(axis1, axis2)
In [7]:
a.swapaxes(0, 2)
Out[7]:
array([[[ 0, 12],
        [ 4, 16],
        [ 8, 20]],

       [[ 1, 13],
        [ 5, 17],
        [ 9, 21]],

       [[ 2, 14],
        [ 6, 18],
        [10, 22]],

       [[ 3, 15],
        [ 7, 19],
        [11, 23]]])
In [8]:
np.swapaxes(a, 0, 2)
Out[8]:
array([[[ 0, 12],
        [ 4, 16],
        [ 8, 20]],

       [[ 1, 13],
        [ 5, 17],
        [ 9, 21]],

       [[ 2, 14],
        [ 6, 18],
        [10, 22]],

       [[ 3, 15],
        [ 7, 19],
        [11, 23]]])
Universal Functions: Fast Element-Wise Array Functions
在这里插入图片描述

在这里插入图片描述

In [9]:
a = np.arange(10)
a
Out[9]:
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
In [10]:
np.sqrt(a)
Out[10]:
array([0.        , 1.        , 1.41421356, 1.73205081, 2.        ,
       2.23606798, 2.44948974, 2.64575131, 2.82842712, 3.        ])
In [11]:
np.exp(a)
Out[11]:
array([1.00000000e+00, 2.71828183e+00, 7.38905610e+00, 2.00855369e+01,
       5.45981500e+01, 1.48413159e+02, 4.03428793e+02, 1.09663316e+03,
       2.98095799e+03, 8.10308393e+03])
In [12]:
np.add(a, a)
Out[12]:
array([ 0,  2,  4,  6,  8, 10, 12, 14, 16, 18])
In [13]:
a, b = (np.random.random(10) * 10).astype(np.int), (np.random.random(10) * 10).astype(np.int)
print(a, b, sep='\n')
np.maximum(a, b)
[6 2 4 9 0 4 0 9 7 0]
[4 1 1 8 1 8 7 3 5 0]
Out[13]:
array([6, 2, 4, 9, 1, 8, 7, 9, 7, 0])
In [14]:
np.greater(a, b)
Out[14]:
array([ True,  True,  True,  True, False, False, False,  True,  True,
       False])
Array-Oriented Programming with Arrays
1. np.meshgrid(*xi, **kwargs)
In [16]:
%matplotlib inline
import matplotlib.pyplot as plt
x = np.arange(-5, 5, 0.1)
y = np.arange(-5, 5, 0.1)
xx, yy = np.meshgrid(x, y, sparse=True)
z = np.sin(xx**2 + yy**2) / (xx**2 + yy**2)
h = plt.contourf(x,y,z)
plt.show()

2. np.where(condition, [x, y])
In [17]:
a = np.random.rand(4, 4)
a
Out[17]:
array([[0.30359535, 0.96368833, 0.70070416, 0.03747301],
       [0.49606559, 0.76163789, 0.70439863, 0.91353749],
       [0.23025649, 0.68826559, 0.05182237, 0.82248404],
       [0.41439233, 0.1005689 , 0.19717511, 0.62149624]])
In [18]:
np.where(a > 0.5, 1, 0)
Out[18]:
array([[0, 1, 1, 0],
       [0, 1, 1, 1],
       [0, 1, 0, 1],
       [0, 0, 0, 1]])
3. Statistical Methods
在这里插入图片描述

In [19]:
a = np.arange(15).reshape(3, 5)
a
Out[19]:
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14]])
In [20]:
print(a.sum())
print(np.sum(a))
print(np.sum(a, axis=0))
print(a.sum(axis=1))
105
105
[15 18 21 24 27]
[10 35 60]
In [21]:
a.argmin(), a.argmax()
Out[21]:
(0, 14)
In [22]:
a.cumsum()
Out[22]:
array([  0,   1,   3,   6,  10,  15,  21,  28,  36,  45,  55,  66,  78,
        91, 105], dtype=int32)
In [24]:
a[2].cumprod()
Out[24]:
array([    10,    110,   1320,  17160, 240240], dtype=int32)
4. Methods for Boolean Arrays
In [25]:
a = np.arange(1, 10, 2)
a
Out[25]:
array([1, 3, 5, 7, 9])
In [26]:
a % 2 == 0
Out[26]:
array([False, False, False, False, False])
In [27]:
(a % 2 == 0).any()
Out[27]:
False
In [28]:
(a > 5).all()
Out[28]:
False
In [29]:
(a < 5).sum()
Out[29]:
2
3. sort
In [30]:
a = np.random.random((3, 4))
a
Out[30]:
array([[0.87012055, 0.93718039, 0.25669613, 0.07140985],
       [0.60600644, 0.77004609, 0.76050975, 0.59309007],
       [0.68196308, 0.39134017, 0.50863928, 0.29370075]])
In [32]:
a.sort()
a
Out[32]:
array([[0.07140985, 0.25669613, 0.87012055, 0.93718039],
       [0.59309007, 0.60600644, 0.76050975, 0.77004609],
       [0.29370075, 0.39134017, 0.50863928, 0.68196308]])
4. Unique and Other Set Logic
在这里插入图片描述

In [33]:
names = np.array(['Bob', 'Joe', 'Will', 'Bob', 'Will', 'Joe', 'Joe'])
np.unique(names)
Out[33]:
array(['Bob', 'Joe', 'Will'], dtype='<U4')
In [34]:
values = np.array([6, 0, 0, 3, 2, 5, 6])
np.in1d(values, [0, 2, 5])
Out[34]:
array([False,  True,  True, False,  True,  True, False])
Linear Algebra
1. matrix multiplication
In [35]:
x = np.array([[1, 2, 3],
              [4, 5, 6]])
y = np.array([[1, 1],
              [1, 1],
              [1, 1]])
x @ y # or x.dot(y)
Out[35]:
array([[ 6,  6],
       [15, 15]])
2. np.linalg functions
在这里插入图片描述

In [39]:
from numpy.linalg import inv
a = np.array([[1, 2],
             [1, 1]])
a
Out[39]:
array([[1, 2],
       [1, 1]])
In [40]:
inv(a)
Out[40]:
array([[-1.,  2.],
       [ 1., -1.]])
